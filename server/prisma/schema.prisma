generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PG_URI")
}

model files {
  id         Int       @id @default(autoincrement())
  vehicle_id Int?
  filepath   String?
  vehicles   vehicles? @relation(fields: [vehicle_id], references: [id])
}

model insurer {
  id Int @id(map: "guarantor_pkey") @default(autoincrement())
}

model people {
  id                      Int              @id(map: "users_pkey") @default(autoincrement())
  name                    String?
  phone_number            String?
  driver_license_number   String?
  id_number               String?
  current_address         String?
  business_license_number String?
  insurer_plate           String?
  service_card_number     String?
  vehicle_driver          vehicle_driver[]
  vehicle_owner           vehicle_owner[]
  vehicles                vehicles[]
}

model transactions {
  id         Int       @id(map: "payments_pkey") @default(autoincrement())
  vehicle_id Int?
  date       String?
  amount     String?
  label      String?
  vehicles   vehicles? @relation(fields: [vehicle_id], references: [id], onDelete: Cascade, map: "payments_vehicle_id_fkey")
}

model users {
  id       Int     @id(map: "users_pkey1") @default(autoincrement())
  username String?
  password String?
  role     Int?
}

model vehicle_driver {
  id         Int       @id(map: "drivers_pkey") @default(autoincrement())
  vehicle_id Int?
  user_id    Int?
  primary    Boolean?
  people     people?   @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "driver_vehicle_user_id_fkey")
  vehicles   vehicles? @relation(fields: [vehicle_id], references: [id], onUpdate: NoAction, map: "drivers_vehicle_fkey")
}

model vehicle_insurer {
  id Int @id @default(autoincrement())
}

model vehicle_owner {
  id         Int       @id @default(autoincrement())
  vehicle_id Int?
  owner_id   Int?
  date_added String?
  people     people?   @relation(fields: [owner_id], references: [id], onDelete: Cascade)
  vehicles   vehicles? @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)
}

model vehicles {
  id                     Int              @id @default(autoincrement())
  plate                  String?          @default("000000")
  vin                    String?          @default("ZYX00000000")
  commercial_license_num String?          @default("ABC000")
  vehicle_color          String?
  vehicle_model          String?
  fuel_type              Boolean?
  activation_date        String?          @default("1900-01-01")
  registration_date      String?          @default("1900-01-01")
  notes                  String?
  category               String?
  owner_id               Int?
  engine_no              String?
  files                  files[]
  transactions           transactions[]
  vehicle_driver         vehicle_driver[]
  vehicle_owner          vehicle_owner[]
  people                 people?          @relation(fields: [owner_id], references: [id], onDelete: Cascade)
}
